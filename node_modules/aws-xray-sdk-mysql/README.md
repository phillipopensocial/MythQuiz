
## Requirements

  AWS X-Ray SDK Core
  MySQL 2.12.0 or greater

## AWS X-Ray and MySQL

AWS X-Ray MySQL package automatically records query information, request and response data.
Simply patch the MySQL package via 'captureMySQL' as seen below.

The AWS X-Ray SDK Core has two modes - 'manual' and 'automatic'.
Automatic mode uses the Continuation Local Storage package (CLS) and automatically keeps track of the current segment and subsegment. This is the default mode.
Manual mode requires you pass around the segment reference. See examples below.

### environment variables

    MYSQL_DATABASE_VERSION           Sets additional data for the sql subsegment.
    MYSQL_DRIVER_VERSION             Sets additional data for the sql subsegment.

## Automatic mode example

    var AWSXRay = require('aws-xray-sdk-core');
    var captureMySQL = require('aws-xray-sdk-mysql');

    var mysql = captureMySQL(require('mysql'));

    var config = { ... };

    ...

    var connection = mysql.createConnection(config);

    connection.query('SELECT * FROM cats', function(err, rows) {
      //automatically captures query information and error (if any)
    });

    ...

    var pool = mysql.createPool(config);

    pool.query('SELECT * FROM cats', function(err, rows, fields) {
      //automatically captures query information and error (if any)
    }

## Manual mode example

    var AWSXRay = require('aws-xray-sdk-core');
    var captureMySQL = require('aws-xray-sdk-mysql');

    var mysql = captureMySQL(require('mysql'));

    var config = { ... };

    ...

    var connection = mysql.createConnection(config);

    connection.query('SELECT * FROM cats', function(err, rows) {
      //automatically captures query information and error (if any)
    });

    ...

    var pool = mysql.createPool(config);

    pool.query('SELECT * FROM cats', function(err, rows, fields) {
      //automatically captures query information and error (if any)
    }, segment);
